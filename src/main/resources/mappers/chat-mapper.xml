<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="chatMapper">
	
	<resultMap id="chatListResult" type="Chat">
		<id property="chatId" column="chat_id"/>
		<result property="chatName" column="chat_name"/>
		<result property="createDate" column="create_date"/>
		<result property="modifyDate" column="modify_date"/>
		<result property="lastMsg" column="m_content"/>
		<result property="chatType" column="chat_type"/>
		<result property="count" column="chat_count"/>
	</resultMap>
	
	<resultMap id="chatProfileResult" type="Message">
		<id property="chatId" column="chat_id"/>
		<id property="empId" column="emp_id"/>
		<result property="profilePath" column="profile_path"/>
	</resultMap>
	
	<!-- <resultMap id="chatListResult" type="Message">
	</resultMap> -->
	
	<select id="selectChatList" parameterType="_int" resultMap="chatListResult">
		select *
		from chatlist_view
		where emp_id = #{empId}
	</select>
	
	<select id="selectChatProfile" parameterType="_int" resultMap="chatProfileResult">
		SELECT J.CHAT_ID, J.EMP_ID, PROFILE_PATH
		FROM JOIN_CHAT J
		JOIN CHAT C ON(J.CHAT_ID = C.CHAT_ID)
		JOIN EMPLOYEE E ON(J.EMP_ID = E.EMP_ID)
		WHERE CHAT_STATUS = 'Y' AND J.EMP_ID != #{empId}
	</select>
	<!-- 
	<select id="selectMsgList" parameterType="_int" resultMap="messageListResult">
		
	</select> -->

</mapper>
